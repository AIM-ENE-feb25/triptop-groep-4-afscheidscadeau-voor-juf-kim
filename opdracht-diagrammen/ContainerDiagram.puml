@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Container diagram van het Triptop systeem

' Gebruiker
Person(user, "Reiziger", "Beheert en wijzigt zijn reis")

' Systeemgrens
System_Boundary(triptop, "Triptop Systeem") {

' CoS,ntainers binnen het systeem
 Container(web, "Triptop Web App", "React (JavaScript/TypeScript)", "Biedt gebruikers de mogelijkheid om hun reis te beheren en wijzigingen aan te brengen")

 Container(api, "API Gateway", "Spring Boot (Java)", "Regelt autorisatie en request routing")

 Container(trip_manager, "Reisbeheer Service", "Node.js + Express", "Beheert reisoverzicht en wijzigingen van bouwstenen")

Container(booking_sync, "Boekingen Synchronisatie", "Python FastAPI", "Synchroniseert met externe boekingsservices en detecteert wijzigingen")
Container(notifications, "Notificatie Service", "Firebase Cloud Messaging", "Stuurt waarschuwingen naar gebruikers bij wijzigingen in hun reis")
ContainerDb(db, "Database", "PostgreSQL", "Opslag van reisdata, wijzigingen en gebruikersvoorkeuren")
Container(mailService, "Mail Service", "SendGrid API", "Verstuurt e-mails met informatie en meldingen")
Container(paymentService, "Betaalservice", "Stripe API", "Verwerkt betalingen voor de reis")
}
System_Ext(booking, "Booking API", "Booking.com, Airbnb", "Opvragen en beheren van hotelboekingen")
System_Ext(transport, "Vervoer API", "NS, KLM, Uber", "Houdt vervoersdata bij en signaleert wijzigingen")
System_Ext(attractions, "Bezienswaardigheden API", "TripAdvisor, Google Places", "Excursies en attracties")
System_Ext(horeca, "Horeca API", "TheFork, OpenTable", "Suggesties voor restaurants en cafÃ©s")
Container(authService, "Authenticatie Service", "OAuth 2.0", "Regelt authenticatie via externe providers zoals Google")

Rel(user, web, "Bekijkt en wijzigt reisgegevens\n(HTTP JSON)")
Rel(web, api, "Stuurt wijzigingsaanvragen\n(HTTPS, REST API, JSON)")
Rel(api, trip_manager, "Beheert wijzigingslogica en alternatieven\n(REST API, JSON)")
Rel(trip_manager, booking_sync, "Controleert en verwerkt wijzigingen in boekingen via de API\n(REST API, JSON)")
Rel(trip_manager, notifications, "Verstuurt notificaties bij wijzigingen\n(REST API, JSON)")
Rel(trip_manager, mailService, "Stuurt e-mailnotificaties\n(HTTPS, REST API, JSON)")
Rel(trip_manager, paymentService, "Verwerkt betalingen\n(HTTPS, REST API, JSON)")
Rel(trip_manager, authService, "Beheert authenticatie\n(HTTPS, REST API, JSON)")
Rel(authService, web, "Authenticatie via externe provider\n(OAuth 2.0, JSON)")
Rel(booking_sync, booking, "Checkt status hotelboekingen\n(REST API, JSON)")
Rel(booking_sync, transport, "Checkt status transport\n(REST API, JSON)")
Rel(booking_sync, attractions, "Checkt status attracties\n(REST API, JSON)")
Rel(booking_sync, horeca, "Checkt status restaurantboekingen\n(REST API, JSON)")
Rel(trip_manager, db, "Leest en slaat wijzigingen op\n(PostgreSQL, SQL Queries)")

@enduml

remove boeking synchronisatie and all services execept for  reisbeheer service and connect the api with reisbeheer service